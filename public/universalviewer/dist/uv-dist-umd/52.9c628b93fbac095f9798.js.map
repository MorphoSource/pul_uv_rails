{"version":3,"sources":["webpack://UV/./node_modules/@universalviewer/aleph/dist/esm-es5/index-fbd2c40b.js","webpack://UV/./node_modules/@universalviewer/aleph/dist/esm-es5/ion-refresher-content.entry.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,mBAAmB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mCAAmC;AAC3E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACkC;;;;;;;;;;;;;AC9GlC;AAAA;AAAA;AAAA;AAAuG;AAC1C;AAC7D;AACA;AACA,QAAQ,2DAAgB;AACxB;AACA;AACA;AACA,+BAA+B,mDAAM;AACrC;AACA;AACA,uBAAuB,2DAAU;AACjC,qCAAqC,mDAAM,0BAA0B,mDAAM;AAC3E;AACA;AACA;AACA,gBAAgB,2DAAC,CAAC,mDAAI,GAAG,QAAQ,2DAAU,QAAQ,EAAE,2DAAC,SAAS,6BAA6B;AAC5F,YAAY,2DAAC,SAAS,kCAAkC,EAAE,2DAAC,cAAc,sCAAsC;AAC/G,YAAY,2DAAC,SAAS,6CAA6C,4DAAiB,oBAAoB,IAAI,2DAAC,SAAS,gCAAgC;AACtJ,YAAY,2DAAC,SAAS,qCAAqC,EAAE,2DAAC,iBAAiB,+BAA+B;AAC9G,YAAY,2DAAC,SAAS,gDAAgD,4DAAiB,uBAAuB;AAC9G;AACA;AACA,CAAC;AACoD","file":"52.9c628b93fbac095f9798.js","sourcesContent":["/**\r\n * Does a simple sanitization of all elements\r\n * in an untrusted string\r\n */\r\nvar sanitizeDOMString = function (untrustedString) {\r\n    try {\r\n        if (typeof untrustedString !== 'string' || untrustedString === '') {\r\n            return untrustedString;\r\n        }\r\n        /**\r\n         * Create a document fragment\r\n         * separate from the main DOM,\r\n         * create a div to do our work in\r\n         */\r\n        var documentFragment_1 = document.createDocumentFragment();\r\n        var workingDiv = document.createElement('div');\r\n        documentFragment_1.appendChild(workingDiv);\r\n        workingDiv.innerHTML = untrustedString;\r\n        /**\r\n         * Remove any elements\r\n         * that are blocked\r\n         */\r\n        blockedTags.forEach(function (blockedTag) {\r\n            var getElementsToRemove = documentFragment_1.querySelectorAll(blockedTag);\r\n            for (var elementIndex = getElementsToRemove.length - 1; elementIndex >= 0; elementIndex--) {\r\n                var element = getElementsToRemove[elementIndex];\r\n                if (element.parentNode) {\r\n                    element.parentNode.removeChild(element);\r\n                }\r\n                else {\r\n                    documentFragment_1.removeChild(element);\r\n                }\r\n                /**\r\n                 * We still need to sanitize\r\n                 * the children of this element\r\n                 * as they are left behind\r\n                 */\r\n                var childElements = getElementChildren(element);\r\n                /* tslint:disable-next-line */\r\n                for (var childIndex = 0; childIndex < childElements.length; childIndex++) {\r\n                    sanitizeElement(childElements[childIndex]);\r\n                }\r\n            }\r\n        });\r\n        /**\r\n         * Go through remaining elements and remove\r\n         * non-allowed attribs\r\n         */\r\n        // IE does not support .children on document fragments, only .childNodes\r\n        var dfChildren = getElementChildren(documentFragment_1);\r\n        /* tslint:disable-next-line */\r\n        for (var childIndex = 0; childIndex < dfChildren.length; childIndex++) {\r\n            sanitizeElement(dfChildren[childIndex]);\r\n        }\r\n        // Append document fragment to div\r\n        var fragmentDiv = document.createElement('div');\r\n        fragmentDiv.appendChild(documentFragment_1);\r\n        // First child is always the div we did our work in\r\n        var getInnerDiv = fragmentDiv.querySelector('div');\r\n        return (getInnerDiv !== null) ? getInnerDiv.innerHTML : fragmentDiv.innerHTML;\r\n    }\r\n    catch (err) {\r\n        console.error(err);\r\n        return '';\r\n    }\r\n};\r\n/**\r\n * Clean up current element based on allowed attributes\r\n * and then recursively dig down into any child elements to\r\n * clean those up as well\r\n */\r\nvar sanitizeElement = function (element) {\r\n    // IE uses childNodes, so ignore nodes that are not elements\r\n    if (element.nodeType && element.nodeType !== 1) {\r\n        return;\r\n    }\r\n    for (var i = element.attributes.length - 1; i >= 0; i--) {\r\n        var attribute = element.attributes.item(i);\r\n        var attributeName = attribute.name;\r\n        // remove non-allowed attribs\r\n        if (!allowedAttributes.includes(attributeName.toLowerCase())) {\r\n            element.removeAttribute(attributeName);\r\n            continue;\r\n        }\r\n        // clean up any allowed attribs\r\n        // that attempt to do any JS funny-business\r\n        var attributeValue = attribute.value;\r\n        /* tslint:disable-next-line */\r\n        if (attributeValue != null && attributeValue.toLowerCase().includes('javascript:')) {\r\n            element.removeAttribute(attributeName);\r\n        }\r\n    }\r\n    /**\r\n     * Sanitize any nested children\r\n     */\r\n    var childElements = getElementChildren(element);\r\n    /* tslint:disable-next-line */\r\n    for (var i = 0; i < childElements.length; i++) {\r\n        sanitizeElement(childElements[i]);\r\n    }\r\n};\r\n/**\r\n * IE doesn't always support .children\r\n * so we revert to .childNodes instead\r\n */\r\nvar getElementChildren = function (el) {\r\n    return (el.children != null) ? el.children : el.childNodes;\r\n};\r\nvar allowedAttributes = ['class', 'id', 'href', 'src', 'name', 'slot'];\r\nvar blockedTags = ['script', 'style', 'iframe', 'meta', 'link', 'object', 'embed'];\r\nexport { sanitizeDOMString as s };\r\n","import { r as registerInstance, i as config, f as getIonMode, h, H as Host } from './core-684c60cc.js';\r\nimport { s as sanitizeDOMString } from './index-fbd2c40b.js';\r\nvar RefresherContent = /** @class */ (function () {\r\n    function class_1(hostRef) {\r\n        registerInstance(this, hostRef);\r\n    }\r\n    class_1.prototype.componentWillLoad = function () {\r\n        if (this.pullingIcon === undefined) {\r\n            this.pullingIcon = config.get('refreshingIcon', 'arrow-down');\r\n        }\r\n        if (this.refreshingSpinner === undefined) {\r\n            var mode = getIonMode(this);\r\n            this.refreshingSpinner = config.get('refreshingSpinner', config.get('spinner', mode === 'ios' ? 'lines' : 'crescent'));\r\n        }\r\n    };\r\n    class_1.prototype.render = function () {\r\n        return (h(Host, { class: getIonMode(this) }, h(\"div\", { class: \"refresher-pulling\" }, this.pullingIcon &&\r\n            h(\"div\", { class: \"refresher-pulling-icon\" }, h(\"ion-icon\", { icon: this.pullingIcon, lazy: false })), this.pullingText &&\r\n            h(\"div\", { class: \"refresher-pulling-text\", innerHTML: sanitizeDOMString(this.pullingText) })), h(\"div\", { class: \"refresher-refreshing\" }, this.refreshingSpinner &&\r\n            h(\"div\", { class: \"refresher-refreshing-icon\" }, h(\"ion-spinner\", { name: this.refreshingSpinner })), this.refreshingText &&\r\n            h(\"div\", { class: \"refresher-refreshing-text\", innerHTML: sanitizeDOMString(this.refreshingText) }))));\r\n    };\r\n    return class_1;\r\n}());\r\nexport { RefresherContent as ion_refresher_content };\r\n"],"sourceRoot":""}