{"version":3,"sources":["webpack://UV/./node_modules/@universalviewer/uv-ebook-components/dist/esm-es5 lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","webpack://UV/./src/extensions/uv-ebook-extension/DownloadDialogue.ts","webpack://UV/./src/extensions/uv-ebook-extension/Events.ts","webpack://UV/./src/extensions/uv-ebook-extension/Extension.ts","webpack://UV/./src/extensions/uv-ebook-extension/SettingsDialogue.ts","webpack://UV/./src/extensions/uv-ebook-extension/ShareDialogue.ts","webpack://UV/./src/modules/uv-ebookcenterpanel-module/EbookCenterPanel.ts","webpack://UV/./src/modules/uv-ebookleftpanel-module/EbookLeftPanel.ts","webpack://UV/./src/modules/uv-ebookmobilefooterpanel-module/MobileFooter.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC6G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,8FAAoB;AACM;;;;;;;;;;;;;AClC5B;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;ACZlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACsE;AACM;AACU;AACrD;AACoB;AACuC;AACpB;AACsC;AACtC;AACa;AACa;AAC7C;AACN;AACR;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,+EAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,8CAAM;AACvC;AACA,uBAAuB,8CAAM;AAC7B,SAAS;AACT;AACA;AACA;AACA;AACA,mCAAmC,iFAAW;AAC9C;AACA;AACA;AACA;AACA;AACA,iCAAiC,+FAAc;AAC/C;AACA;AACA;AACA;AACA,+BAA+B,qGAAgB;AAC/C;AACA,kCAAkC,4GAAkB;AACpD;AACA;AACA;AACA;AACA;AACA,mCAAmC,iFAAW;AAC9C,yCAAyC,kGAAiB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,8FAAgB;AACpD;AACA;AACA,iCAAiC,6DAAa;AAC9C;AACA;AACA,oCAAoC,kEAAgB;AACpD;AACA;AACA,oCAAoC,mEAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sDAAO;AAC5B;AACA;AACA;AACA;AACA;AACA,mCAAmC,8CAAM;AACzC;AACA;AACA;AACA,CAAC,CAAC,qFAAa;AACA,wEAAS,EAAC;;;;;;;;;;;;;ACrHzB;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC6G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,8FAAoB;AACM;;;;;;;;;;;;;ACzB5B;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACoG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,wFAAiB;AACM;;;;;;;;;;;;;ACjCzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,iBAAiB,SAAI,IAAI,SAAI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AAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AAC4D;AACF;AACU;AAC9B;AAC6D;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,kGAAc;AAC3D;AACA;AACA,wBAAwB,wGAAoB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,4EAAM;AACvD;AACA;AACA,yBAAyB;AACzB,iDAAiD,4EAAM;AACvD;AACA,yBAAyB;AACzB;AACA,oDAAoD,4EAAM;AAC1D,yBAAyB;AACzB,wBAAwB,mDAAK;AAC7B;AACA,yBAAyB;AACzB;AACA,wDAAwD,4EAAM;AAC9D,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,qEAAS;AACe;;;;;;;;;;;;;AC3H1B;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACgF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,yEAAe;AACM","file":"uv-ebook-extension.6dc78b58dc0a166159fd.js","sourcesContent":["var map = {\n\t\"./uv-ebook-reader_2.entry.js\": [\n\t\t\"./node_modules/@universalviewer/uv-ebook-components/dist/esm-es5/uv-ebook-reader_2.entry.js\",\n\t\t5,\n\t\t7,\n\t\t16\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"./node_modules/@universalviewer/uv-ebook-components/dist/esm-es5 lazy recursive ^\\\\.\\\\/.*\\\\.entry\\\\.js$ include: \\\\.entry\\\\.js$ exclude: \\\\.system\\\\.entry\\\\.js$\";\nmodule.exports = webpackAsyncContext;","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DownloadDialogue as BaseDownloadDialogue } from \"../../modules/uv-dialogues-module/DownloadDialogue\";\nvar DownloadDialogue = /** @class */ (function (_super) {\n    __extends(DownloadDialogue, _super);\n    function DownloadDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    DownloadDialogue.prototype.create = function () {\n        this.setConfig(\"downloadDialogue\");\n        _super.prototype.create.call(this);\n    };\n    DownloadDialogue.prototype.open = function ($triggerButton) {\n        _super.prototype.open.call(this, $triggerButton);\n        this.addEntireFileDownloadOptions();\n        this.updateNoneAvailable();\n        this.resize();\n    };\n    DownloadDialogue.prototype.isDownloadOptionAvailable = function (option) {\n        return _super.prototype.isDownloadOptionAvailable.call(this, option);\n    };\n    return DownloadDialogue;\n}(BaseDownloadDialogue));\nexport { DownloadDialogue };\n","var Events = /** @class */ (function () {\n    function Events() {\n    }\n    Events.namespace = \"ebookExtension.\";\n    Events.CFI_FRAGMENT_CHANGE = Events.namespace + \"cfiFragmentChange\";\n    Events.ITEM_CLICKED = Events.namespace + \"itemClicked\";\n    Events.LOADED_NAVIGATION = Events.namespace + \"loadedNavigation\";\n    Events.RELOCATED = Events.namespace + \"relocated\";\n    Events.RENDITION_ATTACHED = Events.namespace + \"renditionAttached\";\n    Events.TOC_READY = Events.namespace + \"tocReady\";\n    return Events;\n}());\nexport { Events };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../../modules/uv-shared-module/BaseEvents\";\nimport { BaseExtension } from \"../../modules/uv-shared-module/BaseExtension\";\nimport { EbookLeftPanel } from \"../../modules/uv-ebookleftpanel-module/EbookLeftPanel\";\nimport { Events } from \"./Events\";\nimport { DownloadDialogue } from \"./DownloadDialogue\";\nimport { EbookCenterPanel } from \"../../modules/uv-ebookcenterpanel-module/EbookCenterPanel\";\nimport { FooterPanel } from \"../../modules/uv-shared-module/FooterPanel\";\nimport { FooterPanel as MobileFooterPanel } from \"../../modules/uv-ebookmobilefooterpanel-module/MobileFooter\";\nimport { HeaderPanel } from \"../../modules/uv-shared-module/HeaderPanel\";\nimport { MoreInfoDialogue } from \"../../modules/uv-dialogues-module/MoreInfoDialogue\";\nimport { MoreInfoRightPanel } from \"../../modules/uv-moreinforightpanel-module/MoreInfoRightPanel\";\nimport { SettingsDialogue } from \"./SettingsDialogue\";\nimport { ShareDialogue } from \"./ShareDialogue\";\nimport { Strings } from \"@edsilv/utils\";\nvar Extension = /** @class */ (function (_super) {\n    __extends(Extension, _super);\n    function Extension() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Extension.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        this.component.subscribe(BaseEvents.CANVAS_INDEX_CHANGE, function (canvasIndex) {\n            _this.viewCanvas(canvasIndex);\n        });\n        this.component.subscribe(Events.CFI_FRAGMENT_CHANGE, function (cfi) {\n            _this.cfiFragement = cfi;\n            _this.fire(Events.CFI_FRAGMENT_CHANGE, _this.cfiFragement);\n        });\n    };\n    Extension.prototype.createModules = function () {\n        _super.prototype.createModules.call(this);\n        if (this.isHeaderPanelEnabled()) {\n            this.headerPanel = new HeaderPanel(this.shell.$headerPanel);\n        }\n        else {\n            this.shell.$headerPanel.hide();\n        }\n        if (this.isLeftPanelEnabled()) {\n            this.leftPanel = new EbookLeftPanel(this.shell.$leftPanel);\n        }\n        else {\n            this.shell.$leftPanel.hide();\n        }\n        this.centerPanel = new EbookCenterPanel(this.shell.$centerPanel);\n        if (this.isRightPanelEnabled()) {\n            this.rightPanel = new MoreInfoRightPanel(this.shell.$rightPanel);\n        }\n        else {\n            this.shell.$rightPanel.hide();\n        }\n        if (this.isFooterPanelEnabled()) {\n            this.footerPanel = new FooterPanel(this.shell.$footerPanel);\n            this.mobileFooterPanel = new MobileFooterPanel(this.shell.$mobileFooterPanel);\n        }\n        else {\n            this.shell.$footerPanel.hide();\n        }\n        this.$moreInfoDialogue = $('<div class=\"overlay moreInfo\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$moreInfoDialogue);\n        this.moreInfoDialogue = new MoreInfoDialogue(this.$moreInfoDialogue);\n        this.$shareDialogue = $('<div class=\"overlay share\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$shareDialogue);\n        this.shareDialogue = new ShareDialogue(this.$shareDialogue);\n        this.$downloadDialogue = $('<div class=\"overlay download\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$downloadDialogue);\n        this.downloadDialogue = new DownloadDialogue(this.$downloadDialogue);\n        this.$settingsDialogue = $('<div class=\"overlay settings\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$settingsDialogue);\n        this.settingsDialogue = new SettingsDialogue(this.$settingsDialogue);\n        if (this.isHeaderPanelEnabled()) {\n            this.headerPanel.init();\n        }\n        if (this.isLeftPanelEnabled()) {\n            this.leftPanel.init();\n        }\n        if (this.isRightPanelEnabled()) {\n            this.rightPanel.init();\n        }\n        if (this.isFooterPanelEnabled()) {\n            this.footerPanel.init();\n        }\n    };\n    Extension.prototype.isLeftPanelEnabled = function () {\n        return true;\n    };\n    Extension.prototype.render = function () {\n        _super.prototype.render.call(this);\n        this.checkForCFIParam();\n    };\n    Extension.prototype.getEmbedScript = function (template, width, height) {\n        var appUri = this.getAppUri();\n        var iframeSrc = appUri + \"#?manifest=\" + this.helper.manifestUri + \"&cfi=\" + this.cfiFragement;\n        var script = Strings.format(template, iframeSrc, width.toString(), height.toString());\n        return script;\n    };\n    Extension.prototype.checkForCFIParam = function () {\n        var cfi = this.data.cfi;\n        if (cfi) {\n            this.component.publish(Events.CFI_FRAGMENT_CHANGE, cfi);\n        }\n    };\n    return Extension;\n}(BaseExtension));\nexport default Extension;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { SettingsDialogue as BaseSettingsDialogue } from \"../../modules/uv-dialogues-module/SettingsDialogue\";\nvar SettingsDialogue = /** @class */ (function (_super) {\n    __extends(SettingsDialogue, _super);\n    function SettingsDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    SettingsDialogue.prototype.create = function () {\n        this.setConfig(\"settingsDialogue\");\n        _super.prototype.create.call(this);\n    };\n    return SettingsDialogue;\n}(BaseSettingsDialogue));\nexport { SettingsDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ShareDialogue as BaseShareDialogue } from \"../../modules/uv-dialogues-module/ShareDialogue\";\nvar ShareDialogue = /** @class */ (function (_super) {\n    __extends(ShareDialogue, _super);\n    function ShareDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    ShareDialogue.prototype.create = function () {\n        this.setConfig(\"shareDialogue\");\n        _super.prototype.create.call(this);\n    };\n    ShareDialogue.prototype.update = function () {\n        _super.prototype.update.call(this);\n        this.code = this.extension.getEmbedScript(this.options.embedTemplate, this.currentWidth, this.currentHeight);\n        this.$code.val(this.code);\n    };\n    ShareDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return ShareDialogue;\n}(BaseShareDialogue));\nexport { ShareDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Async } from \"@edsilv/utils\";\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { CenterPanel } from \"../uv-shared-module/CenterPanel\";\nimport { Events } from \"../../extensions/uv-ebook-extension/Events\";\nimport { Position } from \"../uv-shared-module/Position\";\nimport { applyPolyfills, defineCustomElements } from \"@universalviewer/uv-ebook-components/loader\";\nvar EbookCenterPanel = /** @class */ (function (_super) {\n    __extends(EbookCenterPanel, _super);\n    function EbookCenterPanel($element) {\n        var _this = _super.call(this, $element) || this;\n        _this._ebookReaderReady = false;\n        _this._state = {};\n        _this._prevState = {};\n        _this.attributionPosition = Position.BOTTOM_RIGHT;\n        return _this;\n    }\n    EbookCenterPanel.prototype.create = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var that;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.setConfig(\"ebookCenterPanel\");\n                        _super.prototype.create.call(this);\n                        return [4 /*yield*/, applyPolyfills()];\n                    case 1:\n                        _a.sent();\n                        defineCustomElements(window);\n                        this._ebookReader = document.createElement(\"uv-ebook-reader\");\n                        this.$content.prepend(this._ebookReader);\n                        this._ebookReader.setAttribute(\"width\", \"100%\");\n                        this._ebookReader.setAttribute(\"height\", \"100%\");\n                        this._ebookReader.addEventListener(\"loadedNavigation\", function (e) {\n                            _this.component.publish(Events.LOADED_NAVIGATION, e.detail);\n                        }, false);\n                        this._ebookReader.addEventListener(\"relocated\", function (e) {\n                            _this.component.publish(Events.RELOCATED, e.detail);\n                            _this._cfi = e.detail.start.cfi;\n                            _this.component.publish(Events.CFI_FRAGMENT_CHANGE, _this._cfi);\n                        }, false);\n                        Async.waitFor(function () {\n                            return window.customElements !== undefined;\n                        }, function () {\n                            customElements.whenDefined(\"uv-ebook-reader\").then(function () {\n                                _this._ebookReaderReady = true;\n                            });\n                        });\n                        that = this;\n                        this.component.subscribe(BaseEvents.OPEN_EXTERNAL_RESOURCE, function (e, resources) {\n                            that.openMedia(resources);\n                        });\n                        this.component.subscribe(Events.ITEM_CLICKED, function (href) {\n                            _this._nextState({\n                                cfi: href\n                            });\n                        });\n                        this.component.subscribe(Events.CFI_FRAGMENT_CHANGE, function (cfi) {\n                            Async.waitFor(function () {\n                                return _this._ebookReaderReady;\n                            }, function () {\n                                if (cfi !== _this._cfi) {\n                                    _this._nextState({\n                                        cfi: cfi\n                                    });\n                                }\n                            });\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EbookCenterPanel.prototype.openMedia = function (resources) {\n        var _this = this;\n        this.extension.getExternalResources(resources).then(function () {\n            var canvas = _this.extension.helper.getCurrentCanvas();\n            var annotations = canvas.getContent();\n            if (annotations.length) {\n                var annotation = annotations[0];\n                var body = annotation.getBody();\n                if (body.length) {\n                    var media = body[0];\n                    //const format: MediaType | null = media.getFormat();\n                    _this._nextState({\n                        bookPath: media.id\n                    });\n                }\n            }\n            _this.component.publish(BaseEvents.EXTERNAL_RESOURCE_OPENED);\n            _this.component.publish(BaseEvents.LOAD);\n        });\n    };\n    EbookCenterPanel.prototype._nextState = function (s) {\n        var _this = this;\n        this._state = Object.assign({}, this._state, s);\n        Async.waitFor(function () {\n            return _this._ebookReaderReady;\n        }, function () {\n            if (_this._state.bookPath &&\n                _this._state.bookPath !== _this._prevState.bookPath) {\n                _this._ebookReader.load(_this._state.bookPath);\n            }\n            if (_this._state.cfi && _this._state.cfi !== _this._prevState.cfi) {\n                _this._ebookReader.display(_this._state.cfi);\n            }\n            _this._prevState = Object.assign({}, _this._state);\n        });\n    };\n    EbookCenterPanel.prototype.resize = function () {\n        var _this = this;\n        _super.prototype.resize.call(this);\n        if (this._ebookReaderReady) {\n            setTimeout(function () {\n                _this._ebookReader.resize();\n            }, 10);\n        }\n    };\n    return EbookCenterPanel;\n}(CenterPanel));\nexport { EbookCenterPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { LeftPanel } from \"../uv-shared-module/LeftPanel\";\nimport { Events } from \"../../extensions/uv-ebook-extension/Events\";\nimport { Async } from \"@edsilv/utils\";\nimport { applyPolyfills, defineCustomElements } from \"@universalviewer/uv-ebook-components/loader\";\nvar EbookLeftPanel = /** @class */ (function (_super) {\n    __extends(EbookLeftPanel, _super);\n    function EbookLeftPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    EbookLeftPanel.prototype.create = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.setConfig(\"ebookLeftPanel\");\n                        _super.prototype.create.call(this);\n                        this._$container = $('<div class=\"container\"></div>');\n                        return [4 /*yield*/, applyPolyfills()];\n                    case 1:\n                        _a.sent();\n                        defineCustomElements(window);\n                        this._ebookTOC = document.createElement(\"uv-ebook-toc\");\n                        this._$ebookTOC = $(this._ebookTOC);\n                        //this._ebookTOC.setAttribute(\"src-tab-enabled\", this.config.options.srcTabEnabled);\n                        this.$main.addClass(\"disabled\");\n                        this.$main.append(this._$container);\n                        this._$container.append(this._$ebookTOC);\n                        this.setTitle(this.content.title);\n                        this.component.subscribe(Events.LOADED_NAVIGATION, function (navigation) {\n                            _this.$main.removeClass(\"disabled\");\n                            _this._ebookTOC.toc = navigation.toc;\n                        });\n                        this.component.subscribe(Events.RELOCATED, function (location) {\n                            _this._ebookTOC.selected = location.start.href;\n                        });\n                        this._ebookTOC.addEventListener(\"itemClicked\", function (e) {\n                            _this.component.publish(Events.ITEM_CLICKED, e.detail);\n                        }, false);\n                        Async.waitFor(function () {\n                            return window.customElements !== undefined;\n                        }, function () {\n                            customElements.whenDefined(\"uv-ebook-toc\").then(function () {\n                                _this.component.publish(Events.TOC_READY);\n                            });\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EbookLeftPanel.prototype.expandFullStart = function () {\n        _super.prototype.expandFullStart.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_EXPAND_FULL_START);\n    };\n    EbookLeftPanel.prototype.expandFullFinish = function () {\n        _super.prototype.expandFullFinish.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_EXPAND_FULL_FINISH);\n    };\n    EbookLeftPanel.prototype.collapseFullStart = function () {\n        _super.prototype.collapseFullStart.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_COLLAPSE_FULL_START);\n    };\n    EbookLeftPanel.prototype.collapseFullFinish = function () {\n        _super.prototype.collapseFullFinish.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_COLLAPSE_FULL_FINISH);\n    };\n    EbookLeftPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this._$container.height(this.$main.height() - this._$container.verticalPadding());\n    };\n    return EbookLeftPanel;\n}(LeftPanel));\nexport { EbookLeftPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { FooterPanel as BaseFooterPanel } from \"../uv-shared-module/FooterPanel\";\nvar FooterPanel = /** @class */ (function (_super) {\n    __extends(FooterPanel, _super);\n    function FooterPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    FooterPanel.prototype.create = function () {\n        this.setConfig(\"mobileFooterPanel\");\n        _super.prototype.create.call(this);\n    };\n    FooterPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this.$options.css(\"left\", Math.floor(this.$element.width() / 2 - this.$options.width() / 2));\n    };\n    return FooterPanel;\n}(BaseFooterPanel));\nexport { FooterPanel };\n"],"sourceRoot":""}