{"version":3,"sources":["webpack://UV/./node_modules/@universalviewer/aleph/dist/esm-es5/overlays-84052d05.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,YAAY,SAAI;AACiC;AACjD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2BAA2B,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA,sCAAsC,oBAAoB,EAAE;AAC5D;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mDAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,EAAE;AACH,+FAA+F;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,yBAAyB;AACnE;AACA;AACA,sBAAsB,mDAAM;AAC5B;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,EAAE;AACH;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,iLAA6B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mDAAM;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,EAAE;AACH;AACA;AACA,4CAA4C,oBAAoB,EAAE;AAClE;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,YAAY;AAC5C;AACA;AACA,kBAAkB,mDAAM;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACqR","file":"0.5d49dcfa0b222a1cebc5.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar _this = this;\r\nimport { i as config } from './core-684c60cc.js';\r\nvar lastId = 0;\r\nvar createController = function (tagName) {\r\n    return {\r\n        create: function (options) {\r\n            return createOverlay(tagName, options);\r\n        },\r\n        dismiss: function (data, role, id) {\r\n            return dismissOverlay(document, data, role, tagName, id);\r\n        },\r\n        getTop: function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    return [2 /*return*/, getOverlay(document, tagName)];\r\n                });\r\n            });\r\n        }\r\n    };\r\n};\r\nvar alertController = /*@__PURE__*/ createController('ion-alert');\r\nvar actionSheetController = /*@__PURE__*/ createController('ion-action-sheet');\r\nvar pickerController = /*@__PURE__*/ createController('ion-picker');\r\nvar popoverController = /*@__PURE__*/ createController('ion-popover');\r\nvar prepareOverlay = function (el) {\r\n    var doc = document;\r\n    connectListeners(doc);\r\n    var overlayIndex = lastId++;\r\n    el.overlayIndex = overlayIndex;\r\n    if (!el.hasAttribute('id')) {\r\n        el.id = \"ion-overlay-\" + overlayIndex;\r\n    }\r\n};\r\nvar createOverlay = function (tagName, opts) {\r\n    return customElements.whenDefined(tagName).then(function () {\r\n        var doc = document;\r\n        var element = doc.createElement(tagName);\r\n        element.classList.add('overlay-hidden');\r\n        // convert the passed in overlay options into props\r\n        // that get passed down into the new overlay\r\n        Object.assign(element, opts);\r\n        // append the overlay element to the document body\r\n        getAppRoot(doc).appendChild(element);\r\n        return element.componentOnReady();\r\n    });\r\n};\r\nvar connectListeners = function (doc) {\r\n    if (lastId === 0) {\r\n        lastId = 1;\r\n        // trap focus inside overlays\r\n        doc.addEventListener('focusin', function (ev) {\r\n            var lastOverlay = getOverlay(doc);\r\n            if (lastOverlay && lastOverlay.backdropDismiss && !isDescendant(lastOverlay, ev.target)) {\r\n                var firstInput = lastOverlay.querySelector('input,button');\r\n                if (firstInput) {\r\n                    firstInput.focus();\r\n                }\r\n            }\r\n        });\r\n        // handle back-button click\r\n        doc.addEventListener('ionBackButton', function (ev) {\r\n            var lastOverlay = getOverlay(doc);\r\n            if (lastOverlay && lastOverlay.backdropDismiss) {\r\n                ev.detail.register(100, function () {\r\n                    return lastOverlay.dismiss(undefined, BACKDROP);\r\n                });\r\n            }\r\n        });\r\n        // handle ESC to close overlay\r\n        doc.addEventListener('keyup', function (ev) {\r\n            if (ev.key === 'Escape') {\r\n                var lastOverlay = getOverlay(doc);\r\n                if (lastOverlay && lastOverlay.backdropDismiss) {\r\n                    lastOverlay.dismiss(undefined, BACKDROP);\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\nvar dismissOverlay = function (doc, data, role, overlayTag, id) {\r\n    var overlay = getOverlay(doc, overlayTag, id);\r\n    if (!overlay) {\r\n        return Promise.reject('overlay does not exist');\r\n    }\r\n    return overlay.dismiss(data, role);\r\n};\r\nvar getOverlays = function (doc, selector) {\r\n    if (selector === undefined) {\r\n        selector = 'ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast';\r\n    }\r\n    return Array.from(doc.querySelectorAll(selector))\r\n        .filter(function (c) { return c.overlayIndex > 0; });\r\n};\r\nvar getOverlay = function (doc, overlayTag, id) {\r\n    var overlays = getOverlays(doc, overlayTag);\r\n    return (id === undefined)\r\n        ? overlays[overlays.length - 1]\r\n        : overlays.find(function (o) { return o.id === id; });\r\n};\r\nvar present = function (overlay, name, iosEnterAnimation, mdEnterAnimation, opts) { return __awaiter(_this, void 0, void 0, function () {\r\n    var animationBuilder, completed;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (overlay.presented) {\r\n                    return [2 /*return*/];\r\n                }\r\n                overlay.presented = true;\r\n                overlay.willPresent.emit();\r\n                animationBuilder = (overlay.enterAnimation)\r\n                    ? overlay.enterAnimation\r\n                    : config.get(name, overlay.mode === 'ios' ? iosEnterAnimation : mdEnterAnimation);\r\n                return [4 /*yield*/, overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\r\n            case 1:\r\n                completed = _a.sent();\r\n                if (completed) {\r\n                    overlay.didPresent.emit();\r\n                }\r\n                return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar dismiss = function (overlay, data, role, name, iosLeaveAnimation, mdLeaveAnimation, opts) { return __awaiter(_this, void 0, void 0, function () {\r\n    var animationBuilder, err_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (!overlay.presented) {\r\n                    return [2 /*return*/, false];\r\n                }\r\n                overlay.presented = false;\r\n                _a.label = 1;\r\n            case 1:\r\n                _a.trys.push([1, 3, , 4]);\r\n                overlay.willDismiss.emit({ data: data, role: role });\r\n                animationBuilder = (overlay.leaveAnimation)\r\n                    ? overlay.leaveAnimation\r\n                    : config.get(name, overlay.mode === 'ios' ? iosLeaveAnimation : mdLeaveAnimation);\r\n                return [4 /*yield*/, overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\r\n            case 2:\r\n                _a.sent();\r\n                overlay.didDismiss.emit({ data: data, role: role });\r\n                return [3 /*break*/, 4];\r\n            case 3:\r\n                err_1 = _a.sent();\r\n                console.error(err_1);\r\n                return [3 /*break*/, 4];\r\n            case 4:\r\n                overlay.el.remove();\r\n                return [2 /*return*/, true];\r\n        }\r\n    });\r\n}); };\r\nvar getAppRoot = function (doc) {\r\n    return doc.querySelector('ion-app') || doc.body;\r\n};\r\nvar overlayAnimation = function (overlay, animationBuilder, baseEl, opts) { return __awaiter(_this, void 0, void 0, function () {\r\n    var aniRoot, animation, isAnimationBuilder, mod, err_2, animationResult, hasCompleted;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                if (overlay.animation) {\r\n                    overlay.animation.destroy();\r\n                    overlay.animation = undefined;\r\n                    return [2 /*return*/, false];\r\n                }\r\n                // Make overlay visible in case it's hidden\r\n                baseEl.classList.remove('overlay-hidden');\r\n                aniRoot = baseEl.shadowRoot || overlay.el;\r\n                isAnimationBuilder = true;\r\n                _a.label = 1;\r\n            case 1:\r\n                _a.trys.push([1, 4, , 5]);\r\n                return [4 /*yield*/, import('./index-db7d5039.js')];\r\n            case 2:\r\n                mod = _a.sent();\r\n                return [4 /*yield*/, mod.create(animationBuilder, aniRoot, opts)];\r\n            case 3:\r\n                animation = _a.sent();\r\n                return [3 /*break*/, 5];\r\n            case 4:\r\n                err_2 = _a.sent();\r\n                animation = animationBuilder(aniRoot, opts);\r\n                animation.fill('both');\r\n                isAnimationBuilder = false;\r\n                return [3 /*break*/, 5];\r\n            case 5:\r\n                overlay.animation = animation;\r\n                if (!overlay.animated || !config.getBoolean('animated', true)) {\r\n                    animation.duration(0);\r\n                }\r\n                if (overlay.keyboardClose) {\r\n                    animation.beforeAddWrite(function () {\r\n                        var activeElement = baseEl.ownerDocument.activeElement;\r\n                        if (activeElement && activeElement.matches('input, ion-input, ion-textarea')) {\r\n                            activeElement.blur();\r\n                        }\r\n                    });\r\n                }\r\n                return [4 /*yield*/, animation.playAsync()];\r\n            case 6:\r\n                animationResult = _a.sent();\r\n                hasCompleted = (typeof animationResult === 'undefined') ? true : animation.hasCompleted;\r\n                if (isAnimationBuilder) {\r\n                    animation.destroy();\r\n                }\r\n                overlay.animation = undefined;\r\n                return [2 /*return*/, hasCompleted];\r\n        }\r\n    });\r\n}); };\r\nvar eventMethod = function (element, eventName) {\r\n    var resolve;\r\n    var promise = new Promise(function (r) { return resolve = r; });\r\n    onceEvent(element, eventName, function (event) {\r\n        resolve(event.detail);\r\n    });\r\n    return promise;\r\n};\r\nvar onceEvent = function (element, eventName, callback) {\r\n    var handler = function (ev) {\r\n        element.removeEventListener(eventName, handler);\r\n        callback(ev);\r\n    };\r\n    element.addEventListener(eventName, handler);\r\n};\r\nvar isCancel = function (role) {\r\n    return role === 'cancel' || role === BACKDROP;\r\n};\r\nvar isDescendant = function (parent, child) {\r\n    while (child) {\r\n        if (child === parent) {\r\n            return true;\r\n        }\r\n        child = child.parentElement;\r\n    }\r\n    return false;\r\n};\r\nvar defaultGate = function (h) { return h(); };\r\nvar safeCall = function (handler, arg) {\r\n    if (typeof handler === 'function') {\r\n        var jmp = config.get('_zoneGate', defaultGate);\r\n        return jmp(function () {\r\n            try {\r\n                return handler(arg);\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n    }\r\n    return undefined;\r\n};\r\nvar BACKDROP = 'backdrop';\r\nexport { BACKDROP as B, actionSheetController as a, alertController as b, prepareOverlay as c, present as d, dismiss as e, eventMethod as f, createOverlay as g, dismissOverlay as h, isCancel as i, getOverlay as j, pickerController as k, popoverController as p, safeCall as s };\r\n"],"sourceRoot":""}