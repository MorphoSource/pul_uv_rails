{"version":3,"sources":["webpack://UV/./node_modules/@universalviewer/aleph/dist/esm-es5/index-cc681366.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,YAAY,SAAI;AAC+C;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gEAAe;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gEAAe;AACvC,4BAA4B,gEAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gEAAe;AACvC;AACA;AACA,2BAA2B,gEAAe;AAC1C;AACA;AACA,4BAA4B,gEAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,gEAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,uCAAuC,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA,iEAAiE,wBAAwB,EAAE;AAC3F;AACA;AACA;AACA;AACA,iEAAiE,0BAA0B,EAAE;AAC7F;AACA,gDAAgD,oBAAoB,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,sCAAsC,EAAE;AAC1E,mCAAmC,0BAA0B,EAAE;AAC/D;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB,EAAE;AACtD;AACA;AACA,0CAA0C,gBAAgB,EAAE;AAC5D;AACA;AACA,2CAA2C,yBAAyB,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gCAAgC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC+B","file":"4.116fbe1daea5f3932b60.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar _this = this;\r\nimport { c as createAnimation } from './animation-d551500b.js';\r\n/**\r\n * baseAnimation\r\n * Base class which is extended by the various types. Each\r\n * type will provide their own animations for open and close\r\n * and registers itself with Menu.\r\n */\r\nvar baseAnimation = function () {\r\n    // https://material.io/guidelines/motion/movement.html#movement-movement-in-out-of-screen-bounds\r\n    // https://material.io/guidelines/motion/duration-easing.html#duration-easing-natural-easing-curves\r\n    // \"Apply the sharp curve to items temporarily leaving the screen that may return\r\n    // from the same exit point. When they return, use the deceleration curve. On mobile,\r\n    // this transition typically occurs over 300ms\" -- MD Motion Guide\r\n    return createAnimation()\r\n        .easing('cubic-bezier(0.0, 0.0, 0.2, 1)') // Deceleration curve (Entering the screen)\r\n        .duration(300);\r\n};\r\n/**\r\n * Menu Overlay Type\r\n * The menu slides over the content. The content\r\n * itself, which is under the menu, does not move.\r\n */\r\nvar menuOverlayAnimation = function (menu) {\r\n    var closedX;\r\n    var openedX;\r\n    var BOX_SHADOW_WIDTH = 8;\r\n    var width = menu.width + BOX_SHADOW_WIDTH;\r\n    var menuAnimation = createAnimation();\r\n    var backdropAnimation = createAnimation();\r\n    if (menu.isEndSide) {\r\n        // right side\r\n        closedX = width + 'px';\r\n        openedX = '0px';\r\n    }\r\n    else {\r\n        // left side\r\n        closedX = -width + 'px';\r\n        openedX = '0px';\r\n    }\r\n    menuAnimation\r\n        .addElement(menu.menuInnerEl)\r\n        .fromTo('transform', \"translateX(\" + closedX + \")\", \"translateX(\" + openedX + \")\");\r\n    backdropAnimation\r\n        .addElement(menu.backdropEl)\r\n        .fromTo('opacity', 0.01, 0.32);\r\n    return baseAnimation().addAnimation([menuAnimation, backdropAnimation]);\r\n};\r\n/**\r\n * Menu Push Type\r\n * The content slides over to reveal the menu underneath.\r\n * The menu itself also slides over to reveal its bad self.\r\n */\r\nvar menuPushAnimation = function (menu) {\r\n    var contentOpenedX;\r\n    var menuClosedX;\r\n    var width = menu.width;\r\n    if (menu.isEndSide) {\r\n        contentOpenedX = -width + 'px';\r\n        menuClosedX = width + 'px';\r\n    }\r\n    else {\r\n        contentOpenedX = width + 'px';\r\n        menuClosedX = -width + 'px';\r\n    }\r\n    var menuAnimation = createAnimation()\r\n        .addElement(menu.menuInnerEl)\r\n        .fromTo('transform', \"translateX(\" + menuClosedX + \")\", 'translateX(0px)');\r\n    var contentAnimation = createAnimation()\r\n        .addElement(menu.contentEl)\r\n        .fromTo('transform', 'translateX(0px)', \"translateX(\" + contentOpenedX + \")\");\r\n    var backdropAnimation = createAnimation()\r\n        .addElement(menu.backdropEl)\r\n        .fromTo('opacity', 0.01, 0.32);\r\n    return baseAnimation().addAnimation([menuAnimation, backdropAnimation, contentAnimation]);\r\n};\r\n/**\r\n * Menu Reveal Type\r\n * The content slides over to reveal the menu underneath.\r\n * The menu itself, which is under the content, does not move.\r\n */\r\nvar menuRevealAnimation = function (menu) {\r\n    var openedX = (menu.width * (menu.isEndSide ? -1 : 1)) + 'px';\r\n    var contentOpen = createAnimation()\r\n        .addElement(menu.contentEl) // REVIEW\r\n        .fromTo('transform', 'translateX(0px)', \"translateX(\" + openedX + \")\");\r\n    return baseAnimation().addAnimation(contentOpen);\r\n};\r\nvar createMenuController = function () {\r\n    var menuAnimations = new Map();\r\n    var menus = [];\r\n    var open = function (menu) { return __awaiter(_this, void 0, void 0, function () {\r\n        var menuEl;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, get(menu)];\r\n                case 1:\r\n                    menuEl = _a.sent();\r\n                    if (menuEl) {\r\n                        return [2 /*return*/, menuEl.open()];\r\n                    }\r\n                    return [2 /*return*/, false];\r\n            }\r\n        });\r\n    }); };\r\n    var close = function (menu) { return __awaiter(_this, void 0, void 0, function () {\r\n        var menuEl;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, (menu !== undefined ? get(menu) : getOpen())];\r\n                case 1:\r\n                    menuEl = _a.sent();\r\n                    if (menuEl !== undefined) {\r\n                        return [2 /*return*/, menuEl.close()];\r\n                    }\r\n                    return [2 /*return*/, false];\r\n            }\r\n        });\r\n    }); };\r\n    var toggle = function (menu) { return __awaiter(_this, void 0, void 0, function () {\r\n        var menuEl;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, get(menu)];\r\n                case 1:\r\n                    menuEl = _a.sent();\r\n                    if (menuEl) {\r\n                        return [2 /*return*/, menuEl.toggle()];\r\n                    }\r\n                    return [2 /*return*/, false];\r\n            }\r\n        });\r\n    }); };\r\n    var enable = function (shouldEnable, menu) { return __awaiter(_this, void 0, void 0, function () {\r\n        var menuEl;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, get(menu)];\r\n                case 1:\r\n                    menuEl = _a.sent();\r\n                    if (menuEl) {\r\n                        menuEl.disabled = !shouldEnable;\r\n                    }\r\n                    return [2 /*return*/, menuEl];\r\n            }\r\n        });\r\n    }); };\r\n    var swipeGesture = function (shouldEnable, menu) { return __awaiter(_this, void 0, void 0, function () {\r\n        var menuEl;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, get(menu)];\r\n                case 1:\r\n                    menuEl = _a.sent();\r\n                    if (menuEl) {\r\n                        menuEl.swipeGesture = shouldEnable;\r\n                    }\r\n                    return [2 /*return*/, menuEl];\r\n            }\r\n        });\r\n    }); };\r\n    var isOpen = function (menu) { return __awaiter(_this, void 0, void 0, function () {\r\n        var menuEl, menuEl;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!(menu != null)) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, get(menu)];\r\n                case 1:\r\n                    menuEl = _a.sent();\r\n                    return [2 /*return*/, (menuEl !== undefined && menuEl.isOpen())];\r\n                case 2: return [4 /*yield*/, getOpen()];\r\n                case 3:\r\n                    menuEl = _a.sent();\r\n                    return [2 /*return*/, menuEl !== undefined];\r\n            }\r\n        });\r\n    }); };\r\n    var isEnabled = function (menu) { return __awaiter(_this, void 0, void 0, function () {\r\n        var menuEl;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, get(menu)];\r\n                case 1:\r\n                    menuEl = _a.sent();\r\n                    if (menuEl) {\r\n                        return [2 /*return*/, !menuEl.disabled];\r\n                    }\r\n                    return [2 /*return*/, false];\r\n            }\r\n        });\r\n    }); };\r\n    var get = function (menu) { return __awaiter(_this, void 0, void 0, function () {\r\n        var menuRef, menuEl;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, waitUntilReady()];\r\n                case 1:\r\n                    _a.sent();\r\n                    if (menu === 'start' || menu === 'end') {\r\n                        menuRef = find(function (m) { return m.side === menu && !m.disabled; });\r\n                        if (menuRef) {\r\n                            return [2 /*return*/, menuRef];\r\n                        }\r\n                        // didn't find a menu side that is enabled\r\n                        // so try to get the first menu side found\r\n                        return [2 /*return*/, find(function (m) { return m.side === menu; })];\r\n                    }\r\n                    else if (menu != null) {\r\n                        // the menuId was not left or right\r\n                        // so try to get the menu by its \"id\"\r\n                        return [2 /*return*/, find(function (m) { return m.menuId === menu; })];\r\n                    }\r\n                    menuEl = find(function (m) { return !m.disabled; });\r\n                    if (menuEl) {\r\n                        return [2 /*return*/, menuEl];\r\n                    }\r\n                    // get the first menu in the array, if one exists\r\n                    return [2 /*return*/, menus.length > 0 ? menus[0].el : undefined];\r\n            }\r\n        });\r\n    }); };\r\n    /**\r\n     * Get the instance of the opened menu. Returns `null` if a menu is not found.\r\n     */\r\n    var getOpen = function () { return __awaiter(_this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, waitUntilReady()];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/, _getOpenSync()];\r\n            }\r\n        });\r\n    }); };\r\n    /**\r\n     * Get all menu instances.\r\n     */\r\n    var getMenus = function () { return __awaiter(_this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, waitUntilReady()];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/, getMenusSync()];\r\n            }\r\n        });\r\n    }); };\r\n    /**\r\n     * Get whether or not a menu is animating. Returns `true` if any\r\n     * menu is currently animating.\r\n     */\r\n    var isAnimating = function () { return __awaiter(_this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, waitUntilReady()];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/, isAnimatingSync()];\r\n            }\r\n        });\r\n    }); };\r\n    var registerAnimation = function (name, animation) {\r\n        menuAnimations.set(name, animation);\r\n    };\r\n    var _register = function (menu) {\r\n        if (menus.indexOf(menu) < 0) {\r\n            if (!menu.disabled) {\r\n                _setActiveMenu(menu);\r\n            }\r\n            menus.push(menu);\r\n        }\r\n    };\r\n    var _unregister = function (menu) {\r\n        var index = menus.indexOf(menu);\r\n        if (index > -1) {\r\n            menus.splice(index, 1);\r\n        }\r\n    };\r\n    var _setActiveMenu = function (menu) {\r\n        // if this menu should be enabled\r\n        // then find all the other menus on this same side\r\n        // and automatically disable other same side menus\r\n        var side = menu.side;\r\n        menus\r\n            .filter(function (m) { return m.side === side && m !== menu; })\r\n            .forEach(function (m) { return m.disabled = true; });\r\n    };\r\n    var _setOpen = function (menu, shouldOpen, animated) { return __awaiter(_this, void 0, void 0, function () {\r\n        var openedMenu;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (isAnimatingSync()) {\r\n                        return [2 /*return*/, false];\r\n                    }\r\n                    if (!shouldOpen) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, getOpen()];\r\n                case 1:\r\n                    openedMenu = _a.sent();\r\n                    if (!(openedMenu && menu.el !== openedMenu)) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, openedMenu.setOpen(false, false)];\r\n                case 2:\r\n                    _a.sent();\r\n                    _a.label = 3;\r\n                case 3: return [2 /*return*/, menu._setOpen(shouldOpen, animated)];\r\n            }\r\n        });\r\n    }); };\r\n    var _createAnimation = function (type, menuCmp) {\r\n        var animationBuilder = menuAnimations.get(type);\r\n        if (!animationBuilder) {\r\n            throw new Error('animation not registered');\r\n        }\r\n        var animation = animationBuilder(menuCmp);\r\n        return animation;\r\n    };\r\n    var _getOpenSync = function () {\r\n        return find(function (m) { return m._isOpen; });\r\n    };\r\n    var getMenusSync = function () {\r\n        return menus.map(function (menu) { return menu.el; });\r\n    };\r\n    var isAnimatingSync = function () {\r\n        return menus.some(function (menu) { return menu.isAnimating; });\r\n    };\r\n    var find = function (predicate) {\r\n        var instance = menus.find(predicate);\r\n        if (instance !== undefined) {\r\n            return instance.el;\r\n        }\r\n        return undefined;\r\n    };\r\n    var waitUntilReady = function () {\r\n        return Promise.all(Array.from(document.querySelectorAll('ion-menu'))\r\n            .map(function (menu) { return menu.componentOnReady(); }));\r\n    };\r\n    registerAnimation('reveal', menuRevealAnimation);\r\n    registerAnimation('push', menuPushAnimation);\r\n    registerAnimation('overlay', menuOverlayAnimation);\r\n    return {\r\n        registerAnimation: registerAnimation,\r\n        get: get,\r\n        getMenus: getMenus,\r\n        getOpen: getOpen,\r\n        isEnabled: isEnabled,\r\n        swipeGesture: swipeGesture,\r\n        isAnimating: isAnimating,\r\n        isOpen: isOpen,\r\n        enable: enable,\r\n        toggle: toggle,\r\n        close: close,\r\n        open: open,\r\n        _getOpenSync: _getOpenSync,\r\n        _createAnimation: _createAnimation,\r\n        _register: _register,\r\n        _unregister: _unregister,\r\n        _setOpen: _setOpen,\r\n        _setActiveMenu: _setActiveMenu,\r\n    };\r\n};\r\nvar menuController = /*@__PURE__*/ createMenuController();\r\nexport { menuController as m };\r\n"],"sourceRoot":""}