{"version":3,"sources":["webpack://UV/./node_modules/@universalviewer/aleph/dist/esm-es5/cubic-bezier-287346e4.js","webpack://UV/./node_modules/@universalviewer/aleph/dist/esm-es5/ion-router-outlet.entry.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,+BAA+B,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoD;;;;;;;;;;;;;AC5FpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AAC+H;AACjC;AACR;AAChC;AACtD;AACA;AACA,QAAQ,2DAAgB;AACxB;AACA;AACA;AACA;AACA,oBAAoB,2DAAU;AAC9B;AACA;AACA;AACA;AACA,8BAA8B,2DAAW;AACzC,gCAAgC,2DAAW;AAC3C,+BAA+B,2DAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,mOAAkC;AAC/E;AACA,8FAA8F,wFAAwF,EAAE,eAAe,2DAA2D,EAAE,mBAAmB,kDAAkD,EAAE;AAC3U;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,GAAG,wBAAwB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,mEAAuB,KAAK,2DAAK,YAAY,2DAAK,YAAY,2DAAK,kBAAkB,2DAAK;AAC9I;AACA;AACA,oDAAoD,mEAAuB,KAAK,2DAAK,YAAY,2DAAK,kBAAkB,2DAAK,YAAY,2DAAK;AAC9I;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,yEAAe;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,yEAAe;AAC5D;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,mDAAM;AAC1D,sFAAsF,mDAAM;AAC5F,6CAA6C,4DAAU,gBAAgB;AACvE;AACA;AACA;AACA;AACA,sDAAsD,wBAAwB;AAC9E,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,oBAAoB,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,gBAAgB,2DAAC;AACjB;AACA;AACA,0BAA0B,QAAQ,2DAAU,OAAO,EAAE;AACrD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,0BAA0B,eAAe,OAAO,QAAQ,MAAM,SAAS,kBAAkB,0BAA0B,gBAAgB,UAAU,EAAE,EAAE;AACjJ;AACA;AACA,KAAK;AACL;AACA,CAAC;AAC4C","file":"40.071e75bce6e6d30bd23d.js","sourcesContent":["/**\r\n * Based on:\r\n * https://stackoverflow.com/questions/7348009/y-coordinate-for-a-given-x-cubic-bezier\r\n * https://math.stackexchange.com/questions/26846/is-there-an-explicit-form-for-cubic-b%C3%A9zier-curves\r\n * TODO: Reduce rounding error\r\n */\r\nvar Point = /** @class */ (function () {\r\n    function Point(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    return Point;\r\n}());\r\n/**\r\n * Given a cubic-bezier curve, get the x value (time) given\r\n * the y value (progression).\r\n * Ex: cubic-bezier(0.32, 0.72, 0, 1);\r\n * P0: (0, 0)\r\n * P1: (0.32, 0.72)\r\n * P2: (0, 1)\r\n * P3: (1, 1)\r\n *\r\n * If you give a cubic bezier curve that never reaches the\r\n * provided progression, this function will return NaN.\r\n */\r\nvar getTimeGivenProgression = function (p0, p1, p2, p3, progression) {\r\n    var tValues = solveCubicBezier(p0.y, p1.y, p2.y, p3.y, progression);\r\n    return solveCubicParametricEquation(p0.x, p1.x, p2.x, p3.x, tValues[0]); // TODO: Add better strategy for dealing with multiple solutions\r\n};\r\n/**\r\n * Solve a cubic equation in one dimension (time)\r\n */\r\nvar solveCubicParametricEquation = function (p0, p1, p2, p3, t) {\r\n    var partA = (3 * p1) * Math.pow(t - 1, 2);\r\n    var partB = (-3 * p2 * t) + (3 * p2) + (p3 * t);\r\n    var partC = p0 * Math.pow(t - 1, 3);\r\n    return t * (partA + (t * partB)) - partC;\r\n};\r\n/**\r\n * Find the `t` value for a cubic bezier using Cardano's formula\r\n */\r\nvar solveCubicBezier = function (p0, p1, p2, p3, refPoint) {\r\n    p0 -= refPoint;\r\n    p1 -= refPoint;\r\n    p2 -= refPoint;\r\n    p3 -= refPoint;\r\n    var roots = solveCubicEquation(p3 - 3 * p2 + 3 * p1 - p0, 3 * p2 - 6 * p1 + 3 * p0, 3 * p1 - 3 * p0, p0);\r\n    return roots.filter(function (root) { return root >= 0 && root <= 1; });\r\n};\r\nvar solveQuadraticEquation = function (a, b, c) {\r\n    var discriminant = b * b - 4 * a * c;\r\n    if (discriminant < 0) {\r\n        return [];\r\n    }\r\n    else {\r\n        return [\r\n            (-b + Math.sqrt(discriminant)) / (2 * a),\r\n            (-b - Math.sqrt(discriminant)) / (2 * a)\r\n        ];\r\n    }\r\n};\r\nvar solveCubicEquation = function (a, b, c, d) {\r\n    if (a === 0) {\r\n        return solveQuadraticEquation(b, c, d);\r\n    }\r\n    b /= a;\r\n    c /= a;\r\n    d /= a;\r\n    var p = (3 * c - b * b) / 3;\r\n    var q = (2 * b * b * b - 9 * b * c + 27 * d) / 27;\r\n    if (p === 0) {\r\n        return [Math.pow(-q, 1 / 3)];\r\n    }\r\n    else if (q === 0) {\r\n        return [Math.sqrt(-p), -Math.sqrt(-p)];\r\n    }\r\n    var discriminant = Math.pow(q / 2, 2) + Math.pow(p / 3, 3);\r\n    if (discriminant === 0) {\r\n        return [Math.pow(q / 2, 1 / 2) - b / 3];\r\n    }\r\n    else if (discriminant > 0) {\r\n        return [Math.pow(-(q / 2) + Math.sqrt(discriminant), 1 / 3) - Math.pow((q / 2) + Math.sqrt(discriminant), 1 / 3) - b / 3];\r\n    }\r\n    var r = Math.sqrt(Math.pow(-(p / 3), 3));\r\n    var phi = Math.acos(-(q / (2 * Math.sqrt(Math.pow(-(p / 3), 3)))));\r\n    var s = 2 * Math.pow(r, 1 / 3);\r\n    return [\r\n        s * Math.cos(phi / 3) - b / 3,\r\n        s * Math.cos((phi + 2 * Math.PI) / 3) - b / 3,\r\n        s * Math.cos((phi + 4 * Math.PI) / 3) - b / 3\r\n    ];\r\n};\r\nexport { Point as P, getTimeGivenProgression as g };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { r as registerInstance, f as getIonMode, c as createEvent, i as config, h, d as getElement } from './core-684c60cc.js';\r\nimport { a as attachComponent, d as detachComponent } from './framework-delegate-8aba239f.js';\r\nimport { g as getTimeGivenProgression, P as Point } from './cubic-bezier-287346e4.js';\r\nimport { t as transition } from './index-f1ea188f.js';\r\nvar RouterOutlet = /** @class */ (function () {\r\n    function class_1(hostRef) {\r\n        registerInstance(this, hostRef);\r\n        this.animationEnabled = true;\r\n        /**\r\n         * The mode determines which platform styles to use.\r\n         */\r\n        this.mode = getIonMode(this);\r\n        /**\r\n         * If `true`, the router-outlet should animate the transition of components.\r\n         */\r\n        this.animated = true;\r\n        this.ionNavWillLoad = createEvent(this, \"ionNavWillLoad\", 7);\r\n        this.ionNavWillChange = createEvent(this, \"ionNavWillChange\", 3);\r\n        this.ionNavDidChange = createEvent(this, \"ionNavDidChange\", 3);\r\n    }\r\n    class_1.prototype.swipeHandlerChanged = function () {\r\n        if (this.gesture) {\r\n            this.gesture.setDisabled(this.swipeHandler === undefined);\r\n        }\r\n    };\r\n    class_1.prototype.connectedCallback = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this;\r\n                        return [4 /*yield*/, import('./swipe-back-5ccee2ef.js')];\r\n                    case 1:\r\n                        _a.gesture = (_b.sent()).createSwipeBackGesture(this.el, function () { return !!_this.swipeHandler && _this.swipeHandler.canStart() && _this.animationEnabled; }, function () { return _this.swipeHandler && _this.swipeHandler.onStart(); }, function (step) { return _this.ani && _this.ani.progressStep(step); }, function (shouldComplete, step, dur) {\r\n                            if (_this.ani) {\r\n                                _this.animationEnabled = false;\r\n                                _this.ani.onFinish(function () {\r\n                                    _this.animationEnabled = true;\r\n                                    if (_this.swipeHandler) {\r\n                                        _this.swipeHandler.onEnd(shouldComplete);\r\n                                    }\r\n                                }, { oneTimeCallback: true });\r\n                                // Account for rounding errors in JS\r\n                                var newStepValue = (shouldComplete) ? -0.001 : 0.001;\r\n                                /**\r\n                                 * Animation will be reversed here, so need to\r\n                                 * reverse the easing curve as well\r\n                                 *\r\n                                 * Additionally, we need to account for the time relative\r\n                                 * to the new easing curve, as `stepValue` is going to be given\r\n                                 * in terms of a linear curve.\r\n                                 */\r\n                                if (!shouldComplete) {\r\n                                    _this.ani.easing('cubic-bezier(1, 0, 0.68, 0.28)');\r\n                                    newStepValue += getTimeGivenProgression(new Point(0, 0), new Point(1, 0), new Point(0.68, 0.28), new Point(1, 1), step);\r\n                                }\r\n                                else {\r\n                                    newStepValue += getTimeGivenProgression(new Point(0, 0), new Point(0.32, 0.72), new Point(0, 1), new Point(1, 1), step);\r\n                                }\r\n                                _this.ani.progressEnd(shouldComplete ? 1 : 0, newStepValue, dur);\r\n                            }\r\n                        });\r\n                        this.swipeHandlerChanged();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    class_1.prototype.componentWillLoad = function () {\r\n        this.ionNavWillLoad.emit();\r\n    };\r\n    class_1.prototype.disconnectedCallback = function () {\r\n        if (this.gesture) {\r\n            this.gesture.destroy();\r\n            this.gesture = undefined;\r\n        }\r\n    };\r\n    /** @internal */\r\n    class_1.prototype.commit = function (enteringEl, leavingEl, opts) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var unlock, changed, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.lock()];\r\n                    case 1:\r\n                        unlock = _a.sent();\r\n                        changed = false;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        return [4 /*yield*/, this.transition(enteringEl, leavingEl, opts)];\r\n                    case 3:\r\n                        changed = _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        e_1 = _a.sent();\r\n                        console.error(e_1);\r\n                        return [3 /*break*/, 5];\r\n                    case 5:\r\n                        unlock();\r\n                        return [2 /*return*/, changed];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /** @internal */\r\n    class_1.prototype.setRouteId = function (id, params, direction) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var changed;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.setRoot(id, params, {\r\n                            duration: direction === 'root' ? 0 : undefined,\r\n                            direction: direction === 'back' ? 'back' : 'forward',\r\n                        })];\r\n                    case 1:\r\n                        changed = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                changed: changed,\r\n                                element: this.activeEl\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /** @internal */\r\n    class_1.prototype.getRouteId = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var active;\r\n            return __generator(this, function (_a) {\r\n                active = this.activeEl;\r\n                return [2 /*return*/, active ? {\r\n                        id: active.tagName,\r\n                        element: active,\r\n                    } : undefined];\r\n            });\r\n        });\r\n    };\r\n    class_1.prototype.setRoot = function (component, params, opts) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var leavingEl, enteringEl;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.activeComponent === component) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        leavingEl = this.activeEl;\r\n                        return [4 /*yield*/, attachComponent(this.delegate, this.el, component, ['ion-page', 'ion-page-invisible'], params)];\r\n                    case 1:\r\n                        enteringEl = _a.sent();\r\n                        this.activeComponent = component;\r\n                        this.activeEl = enteringEl;\r\n                        // commit animation\r\n                        return [4 /*yield*/, this.commit(enteringEl, leavingEl, opts)];\r\n                    case 2:\r\n                        // commit animation\r\n                        _a.sent();\r\n                        return [4 /*yield*/, detachComponent(this.delegate, leavingEl)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2 /*return*/, true];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    class_1.prototype.transition = function (enteringEl, leavingEl, opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, el, mode, animated, animationBuilder;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (leavingEl === enteringEl) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        // emit nav will change event\r\n                        this.ionNavWillChange.emit();\r\n                        _a = this, el = _a.el, mode = _a.mode;\r\n                        animated = this.animated && config.getBoolean('animated', true);\r\n                        animationBuilder = this.animation || opts.animationBuilder || config.get('navAnimation');\r\n                        return [4 /*yield*/, transition(Object.assign({ mode: mode,\r\n                                animated: animated,\r\n                                animationBuilder: animationBuilder,\r\n                                enteringEl: enteringEl,\r\n                                leavingEl: leavingEl, baseEl: el, progressCallback: (opts.progressAnimation\r\n                                    ? function (ani) { return _this.ani = ani; }\r\n                                    : undefined) }, opts))];\r\n                    case 1:\r\n                        _b.sent();\r\n                        // emit nav changed event\r\n                        this.ionNavDidChange.emit();\r\n                        return [2 /*return*/, true];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    class_1.prototype.lock = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var p, resolve;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        p = this.waitPromise;\r\n                        this.waitPromise = new Promise(function (r) { return resolve = r; });\r\n                        if (!(p !== undefined)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, p];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, resolve];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    class_1.prototype.render = function () {\r\n        return (h(\"slot\", null));\r\n    };\r\n    Object.defineProperty(class_1.prototype, \"el\", {\r\n        get: function () { return getElement(this); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(class_1, \"watchers\", {\r\n        get: function () {\r\n            return {\r\n                \"swipeHandler\": [\"swipeHandlerChanged\"]\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(class_1, \"style\", {\r\n        get: function () { return \":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return class_1;\r\n}());\r\nexport { RouterOutlet as ion_router_outlet };\r\n"],"sourceRoot":""}